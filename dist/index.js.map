{
  "version": 3,
  "sources": ["../lib/error_invalid_ellipsis.js", "../lib/error_insufficient_dimensions.js", "../lib/error_too_many_dimensions.js", "../lib/error_out_of_bounds.js", "../lib/re_subseq_sep.js", "../lib/re_integer.js", "../lib/main.js", "../lib/index.js"],
  "sourcesContent": ["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\n/**\n* Returns an error object for a subsequence string containing an invalid use of ellipsis.\n*\n* @private\n* @returns {Object} error object\n*/\nfunction error() {\n\treturn {\n\t\t'code': 'ERR_SLICE_INVALID_ELLIPSIS'\n\t};\n}\n\n\n// EXPORTS //\n\nmodule.exports = error;\n", "/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\n/**\n* Returns an error object for a subsequence string with insufficient dimensions.\n*\n* @private\n* @returns {Object} error object\n*/\nfunction error() {\n\treturn {\n\t\t'code': 'ERR_SLICE_INSUFFICIENT_DIMENSIONS'\n\t};\n}\n\n\n// EXPORTS //\n\nmodule.exports = error;\n", "/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\n/**\n* Returns an error object for a subsequence string with too many dimensions.\n*\n* @private\n* @returns {Object} error object\n*/\nfunction error() {\n\treturn {\n\t\t'code': 'ERR_SLICE_TOO_MANY_DIMENSIONS'\n\t};\n}\n\n\n// EXPORTS //\n\nmodule.exports = error;\n", "/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\n/**\n* Returns an error object for a subsequence string resolving to a slice which exceeds index bounds.\n*\n* @private\n* @returns {Object} error object\n*/\nfunction error() {\n\treturn {\n\t\t'code': 'ERR_SLICE_OUT_OF_BOUNDS'\n\t};\n}\n\n\n// EXPORTS //\n\nmodule.exports = error;\n", "/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\n/**\n* Matches a character sequence for a comma separator used to delineate subsequence strings.\n*\n* Regular expression: `\\s*,\\s*`\n*\n* -   `\\s*`\n*\n*     -   match zero or more whitespace characters\n*\n* -   `,`\n*\n*     -   match the comma character exactly\n*\n* -   `\\s*`\n*\n*     -   match zero or more whitespace characters\n*\n* ## Notes\n*\n* -   The regular expression allows for whitespace to surround the `,` character in multi-dimensional subsequence strings (e.g., '2:10 , 4:1 , ... , 1' vs '2:10,4:1,...,1').\n*\n* @private\n* @name RE_SUBSEQ_SEP\n* @type {RegExp}\n*\n* @example\n* var parts = ','.split( RE_SUBSEQ_SEP );\n* // returns [ '', '' ]\n*\n* parts = ' , '.split( RE_SUBSEQ_SEP );\n* // returns [ '', '' ]\n*/\nvar RE_SUBSEQ_SEP = /\\s*,\\s*/;\n\n\n// EXPORTS //\n\nmodule.exports = RE_SUBSEQ_SEP;\n", "/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\n/**\n* Matches a character sequence for an integer value.\n*\n* Regular expression: `/^[-+]?\\d+$/`\n*\n* -   `^`\n*\n*     -   start of input\n*\n* -   `[-+]?`\n*\n*     -   match a minus or plus sign (if present)\n*\n* -   `\\d+`\n*\n*     -   match one or more digits\n*\n* -   `$`\n*\n*     -   end of input\n*\n* @private\n* @name RE_INTEGER\n* @type {RegExp}\n*\n* @example\n* var bool = RE_INTEGER.test( '123' );\n* // returns true\n*\n* bool = RE_INTEGER.test( '12.3' );\n* // returns false\n*/\nvar RE_INTEGER = /^[-+]?[0-9]+$/;\n\n\n// EXPORTS //\n\nmodule.exports = RE_INTEGER;\n", "/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar trim = require( '@stdlib/string-base-trim' );\nvar Slice = require( '@stdlib/slice-ctor' );\nvar args2multislice = require( '@stdlib/slice-base-args2multislice' );\nvar seq2slice = require( '@stdlib/slice-base-seq2slice' );\nvar eInvalidEllipsis = require( './error_invalid_ellipsis.js' );\nvar eInsufficientDimensions = require( './error_insufficient_dimensions.js' );\nvar eTooManyDimensions = require( './error_too_many_dimensions.js' );\nvar eOutOfBounds = require( './error_out_of_bounds.js' );\nvar RE_SUBSEQ_SEP = require( './re_subseq_sep.js' );\nvar RE_INTEGER = require( './re_integer.js' );\n\n\n// MAIN //\n\n/**\n* Converts a multidimensional subsequence string to a MultiSlice object.\n*\n* ## Notes\n*\n* -   A multidimensional subsequence string is a comma-separated list of single-dimension indexing expressions (i.e., integers and/or subsequence strings). For example, the following\n*\n*     ```text\n*     2\n*     :\n*     2:\n*     :10\n*     2:10\n*     ::-1\n*     10:2:-1\n*     :2:\n*     2:10:\n*     2::2\n*     :10:2\n*     :, :, :\n*     1, 2, 3\n*     0:10, 1:20:2, ::-1\n*     ...\n*     :, ..., 2\n*     ```\n*\n*     are all valid multidimensional subsequence strings.\n*\n* -   Providing a single nonnegative integer `i` as a single-dimension index indexes the same elements as the subsequence `i:i+1`.\n*\n* -   Providing a single negative integer `i` as a single-dimension index indexes the same elements as the subsequence `n+i:n+i+i`, where `n` is the dimension size.\n*\n* -   While integers index the same elements as equivalent subsequences, providing an integer as a single-dimension index indicates to reduce the number of dimensions by one (e.g., if the provided shape corresponds to an array having rank `2`, then `rank(A)-1 == rank(A['0,:'])`). In contrast, providing a subsequence indicates to retain a respective dimension (e.g., if the provided shape corresponds to an array having rank `2`, then `rank(A) == rank(A[':,:'])`).\n*\n* -   A multidimensional subsequence string can only contain **one** ellipsis ('...') operator. An ellipsis indicates to apply `:` to each dimension necessary to index all dimensions (e.g., if `A` has rank `4`, `A['1:, ..., 2:5'] == A['1:, :, :, 2:5']`).\n*\n* -   Except in the case of providing a single ellipsis, the number of single-dimension indexing expressions must equal the number of dimensions in the input shape.\n*\n* -   The function returns an error object if provided an invalid subsequence string.\n*\n* -   If `strict` is `true`, the function returns an error object if a single-dimension index expression which exceeds index bounds.\n*\n* @param {string} str - input string\n* @param {NonNegativeIntegerArray} shape - maximum allowed slice shape\n* @param {boolean} strict - boolean indicating whether to enforce strict bounds checking\n* @returns {(MultiSlice|Object)} MultiSlice object or an error object\n*\n* @example\n* var s = seq2multislice( '0:10:2', [ 10 ], false );\n* // returns <MultiSlice>\n*\n* var data = s.data;\n* // returns [ <Slice> ]\n*\n* var s0 = data[ 0 ];\n* // returns <Slice>\n*\n* var v = s0.start;\n* // returns 0\n*\n* v = s0.stop;\n* // returns 10\n*\n* v = s0.step;\n* // returns 2\n*\n* @example\n* var s = seq2multislice( 'end-3::-1', [ 10 ], false );\n* // returns <MultiSlice>\n*\n* var data = s.data;\n* // returns [ <Slice> ]\n*\n* var s0 = data[ 0 ];\n* // returns <Slice>\n*\n* var v = s0.start;\n* // returns 7\n*\n* v = s0.stop;\n* // returns null\n*\n* v = s0.step;\n* // returns -1\n*\n* @example\n* var s = seq2multislice( '2,0:10:2,-4', [ 10, 10, 10 ], false );\n* // returns <MultiSlice>\n*\n* var data = s.data;\n* // returns [ 2, <Slice>, -4 ]\n*\n* @example\n* var s = seq2multislice( '::-2,...,:', [ 10, 10, 10, 10, 10 ], false );\n* // returns <MultiSlice>\n*\n* var data = s.data;\n* // returns [ <Slice>, <Slice>, <Slice>, <Slice>, <Slice> ]\n*\n* var s1 = data[ 1 ];\n* // returns <Slice>\n*\n* var v = s1.start;\n* // returns 0\n*\n* v = s1.stop;\n* // returns 10\n*\n* v = s1.step;\n* // returns 1\n*/\nfunction seq2multislice( str, shape, strict ) {\n\tvar parts;\n\tvar args;\n\tvar FLG;\n\tvar len;\n\tvar N;\n\tvar M;\n\tvar s;\n\tvar i;\n\tvar j;\n\tvar k;\n\n\tN = shape.length;\n\n\tparts = trim( str ).split( RE_SUBSEQ_SEP );\n\tM = parts.length;\n\n\tFLG = false;\n\targs = [];\n\tj = 0; // dual pointer as `parts.length` may not equal `shape.length` due to the ellipsis operator\n\tfor ( i = 0; i < M; i++ ) {\n\t\ts = parts[ i ];\n\n\t\t// Case: ellipsis operator\n\t\tif ( s === '...' ) {\n\t\t\t// Only allow a single usage of the ellipsis operator...\n\t\t\tif ( FLG ) {\n\t\t\t\treturn eInvalidEllipsis();\n\t\t\t}\n\t\t\tFLG = true;\n\t\t\tfor ( k = 0; k < N-M+1; k++ ) {\n\t\t\t\targs.push( new Slice( 0, shape[ j ], 1 ) );\n\t\t\t\tj += 1;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tlen = shape[ j ];\n\n\t\t// Case: integer index\n\t\tif ( RE_INTEGER.test( s ) ) {\n\t\t\ts = parseInt( s, 10 );\n\t\t\tif ( strict ) {\n\t\t\t\tif ( s < 0 ) {\n\t\t\t\t\tif ( len + s < 0 ) {\n\t\t\t\t\t\treturn eOutOfBounds();\n\t\t\t\t\t}\n\t\t\t\t} else if ( s >= len ) {\n\t\t\t\t\treturn eOutOfBounds();\n\t\t\t\t}\n\t\t\t}\n\t\t\tj += 1;\n\t\t}\n\t\t// Case: subsequence\n\t\telse {\n\t\t\ts = seq2slice( s, len, strict );\n\t\t\tif ( s.code ) {\n\t\t\t\treturn s;\n\t\t\t}\n\t\t\tj += 1;\n\t\t}\n\t\targs.push( s );\n\t}\n\t// Verify that we've been provided the right number of slice dimensions...\n\tif ( args.length !== N ) {\n\t\tif ( args.length < N ) {\n\t\t\treturn eInsufficientDimensions();\n\t\t}\n\t\treturn eTooManyDimensions();\n\t}\n\treturn args2multislice( args );\n}\n\n\n// EXPORTS //\n\nmodule.exports = seq2multislice;\n", "/**\n* @license Apache-2.0\n*\n* Copyright (c) 2023 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Convert a multidimensional subsequence string to a MultiSlice object.\n*\n* @module @stdlib/slice-base-seq2multislice\n*\n* @example\n* var seq2multislice = require( '@stdlib/slice-base-seq2multislice' );\n*\n* var s = seq2multislice( '0:10:2', [ 10 ], false );\n* // returns <MultiSlice>\n*\n* var data = s.data;\n* // returns [ <Slice> ]\n*\n* var s0 = data[ 0 ];\n* // returns <Slice>\n*\n* var v = s0.start;\n* // returns 0\n*\n* v = s0.stop;\n* // returns 10\n*\n* v = s0.step;\n* // returns 2\n*\n* @example\n* var seq2multislice = require( '@stdlib/slice-base-seq2multislice' );\n*\n* var s = seq2multislice( '2,0:10:2,-4', [ 10, 10, 10 ], false );\n* // returns <MultiSlice>\n*\n* var data = s.data;\n* // returns [ 2, <Slice>, -4 ]\n*\n* @example\n* var seq2multislice = require( '@stdlib/slice-base-seq2multislice' );\n*\n* var s = seq2multislice( '::-2,...,:', [ 10, 10, 10, 10, 10 ], false );\n* // returns <MultiSlice>\n*\n* var data = s.data;\n* // returns [ <Slice>, <Slice>, <Slice>, <Slice>, <Slice> ]\n*\n* var s1 = data[ 1 ];\n* // returns <Slice>\n*\n* var v = s1.start;\n* // returns 0\n*\n* v = s1.stop;\n* // returns 10\n*\n* v = s1.step;\n* // returns 1\n*/\n\n// MODULES //\n\nvar main = require( './main.js' );\n\n\n// EXPORTS //\n\nmodule.exports = main;\n"],
  "mappings": "uGAAA,IAAAA,EAAAC,EAAA,SAAAC,EAAAC,EAAA,cA4BA,SAASC,GAAQ,CAChB,MAAO,CACN,KAAQ,4BACT,CACD,CAKAD,EAAO,QAAUC,ICrCjB,IAAAC,EAAAC,EAAA,SAAAC,EAAAC,EAAA,cA4BA,SAASC,GAAQ,CAChB,MAAO,CACN,KAAQ,mCACT,CACD,CAKAD,EAAO,QAAUC,ICrCjB,IAAAC,EAAAC,EAAA,SAAAC,EAAAC,EAAA,cA4BA,SAASC,GAAQ,CAChB,MAAO,CACN,KAAQ,+BACT,CACD,CAKAD,EAAO,QAAUC,ICrCjB,IAAAC,EAAAC,EAAA,SAAAC,EAAAC,EAAA,cA4BA,SAASC,GAAQ,CAChB,MAAO,CACN,KAAQ,yBACT,CACD,CAKAD,EAAO,QAAUC,ICrCjB,IAAAC,EAAAC,EAAA,SAAAC,EAAAC,EAAA,cAsDA,IAAIC,EAAgB,UAKpBD,EAAO,QAAUC,IC3DjB,IAAAC,EAAAC,EAAA,SAAAC,EAAAC,EAAA,cAsDA,IAAIC,EAAa,gBAKjBD,EAAO,QAAUC,IC3DjB,IAAAC,EAAAC,EAAA,SAAAC,EAAAC,EAAA,cAsBA,IAAIC,EAAO,QAAS,0BAA2B,EAC3CC,EAAQ,QAAS,oBAAqB,EACtCC,EAAkB,QAAS,oCAAqC,EAChEC,EAAY,QAAS,8BAA+B,EACpDC,EAAmB,IACnBC,EAA0B,IAC1BC,EAAqB,IACrBC,EAAe,IACfC,EAAgB,IAChBC,EAAa,IAoHjB,SAASC,EAAgBC,EAAKC,EAAOC,EAAS,CAC7C,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAUJ,IARAL,EAAIN,EAAM,OAEVE,EAAQd,EAAMW,CAAI,EAAE,MAAOH,CAAc,EACzCW,EAAIL,EAAM,OAEVE,EAAM,GACND,EAAO,CAAC,EACRO,EAAI,EACED,EAAI,EAAGA,EAAIF,EAAGE,IAAM,CAIzB,GAHAD,EAAIN,EAAOO,CAAE,EAGRD,IAAM,MAAQ,CAElB,GAAKJ,EACJ,OAAOZ,EAAiB,EAGzB,IADAY,EAAM,GACAO,EAAI,EAAGA,EAAIL,EAAEC,EAAE,EAAGI,IACvBR,EAAK,KAAM,IAAId,EAAO,EAAGW,EAAOU,CAAE,EAAG,CAAE,CAAE,EACzCA,GAAK,EAEN,QACD,CAIA,GAHAL,EAAML,EAAOU,CAAE,EAGVb,EAAW,KAAMW,CAAE,EAAI,CAE3B,GADAA,EAAI,SAAUA,EAAG,EAAG,EACfP,GACJ,GAAKO,EAAI,GACR,GAAKH,EAAMG,EAAI,EACd,OAAOb,EAAa,UAEVa,GAAKH,EAChB,OAAOV,EAAa,EAGtBe,GAAK,CACN,KAEK,CAEJ,GADAF,EAAIjB,EAAWiB,EAAGH,EAAKJ,CAAO,EACzBO,EAAE,KACN,OAAOA,EAERE,GAAK,CACN,CACAP,EAAK,KAAMK,CAAE,CACd,CAEA,OAAKL,EAAK,SAAWG,EACfH,EAAK,OAASG,EACXb,EAAwB,EAEzBC,EAAmB,EAEpBJ,EAAiBa,CAAK,CAC9B,CAKAhB,EAAO,QAAUW,IC/IjB,IAAIc,EAAO,IAKX,OAAO,QAAUA",
  "names": ["require_error_invalid_ellipsis", "__commonJSMin", "exports", "module", "error", "require_error_insufficient_dimensions", "__commonJSMin", "exports", "module", "error", "require_error_too_many_dimensions", "__commonJSMin", "exports", "module", "error", "require_error_out_of_bounds", "__commonJSMin", "exports", "module", "error", "require_re_subseq_sep", "__commonJSMin", "exports", "module", "RE_SUBSEQ_SEP", "require_re_integer", "__commonJSMin", "exports", "module", "RE_INTEGER", "require_main", "__commonJSMin", "exports", "module", "trim", "Slice", "args2multislice", "seq2slice", "eInvalidEllipsis", "eInsufficientDimensions", "eTooManyDimensions", "eOutOfBounds", "RE_SUBSEQ_SEP", "RE_INTEGER", "seq2multislice", "str", "shape", "strict", "parts", "args", "FLG", "len", "N", "M", "s", "i", "j", "k", "main"]
}
